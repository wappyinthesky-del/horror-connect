document.addEventListener('DOMContentLoaded', function() {
    const passwordInput = document.getElementById('password');
    const passwordConfirmInput = document.getElementById('password_confirm');
    const registerBtn = document.getElementById('register-btn');
    const passwordError = document.getElementById('password-error');
    if (passwordInput && passwordConfirmInput && registerBtn) {
        function validatePasswords() {
            const password = passwordInput.value;
            const passwordConfirm = passwordConfirmInput.value;
            if (!password || !passwordConfirm) {
                registerBtn.disabled = true;
                passwordError.style.display = 'none';
                return;
            }
            if (password !== passwordConfirm) {
                registerBtn.disabled = true;
                passwordError.style.display = 'block';
                passwordError.textContent = 'パスワードが一致しません';
            } else {
                registerBtn.disabled = false;
                passwordError.style.display = 'none';
            }
        }
        passwordInput.addEventListener('input', validatePasswords);
        passwordConfirmInput.addEventListener('input', validatePasswords);
        validatePasswords();
    }
    const mediaLabels = document.querySelectorAll('.media-label');
    if (mediaLabels.length > 0) {
        mediaLabels.forEach(label => {
            label.addEventListener('click', function(e) {
                e.preventDefault();
                const checkbox = document.getElementById(this.getAttribute('for'));
                if (checkbox) {
                    checkbox.checked = !checkbox.checked;
                }
            });
        });
    }
    const genreLabels = document.querySelectorAll('.genre-label');
    if (genreLabels.length > 0) {
        genreLabels.forEach(label => {
            label.addEventListener('click', function(e) {
                e.preventDefault();
                const checkbox = document.getElementById(this.getAttribute('for'));
                if (checkbox) {
                    checkbox.checked = !checkbox.checked;
                }
            });
        });
    }
    const ngLabels = document.querySelectorAll('.ng-label');
    if (ngLabels.length > 0) {
        ngLabels.forEach(label => {
            label.addEventListener('click', function(e) {
                e.preventDefault();
                const checkbox = document.getElementById(this.getAttribute('for'));
                if (checkbox) {
                    checkbox.checked = !checkbox.checked;
                }
            });
        });
    }
    const beliefLabels = document.querySelectorAll('.belief-label');
    if (beliefLabels.length > 0) {
        beliefLabels.forEach(label => {
            label.addEventListener('click', function(e) {
                e.preventDefault();
                const radio = document.getElementById(this.getAttribute('for'));
                if (radio) {
                    radio.checked = true;
                }
            });
        });
    }
    const storyLabels = document.querySelectorAll('.story-label');
    if (storyLabels.length > 0) {
        storyLabels.forEach(label => {
            label.addEventListener('click', function(e) {
                e.preventDefault();
                const radio = document.getElementById(this.getAttribute('for'));
                if (radio) {
                    radio.checked = true;
                }
            });
        });
    }
    const navItems = document.querySelectorAll('.nav-item');
    const tabPanels = document.querySelectorAll('.tab-panel');
    if (navItems.length > 0 && tabPanels.length > 0) {
        navItems.forEach(item => {
            item.addEventListener('click', function(e) {
                e.preventDefault();
                const targetTab = this.getAttribute('data-tab');
                navItems.forEach(nav => nav.classList.remove('active'));
                this.classList.add('active');
                tabPanels.forEach(panel => panel.classList.remove('active'));
                const targetPanel = document.getElementById(targetTab + '-tab');
                if (targetPanel) {
                    targetPanel.classList.add('active');
                }
            });
        });
    }
});